[databases]
* = host=postgres port=5432

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 6432

auth_type = scram-sha-256
auth_user = pgbouncer_auth
auth_query = SELECT usename, passwd FROM pg_shadow WHERE usename=$1
auth_file = /etc/pgbouncer/userlist.txt
auth_dbname = postgres
client_tls_sslmode = require
client_tls_cert_file = /etc/pgbouncer/certs/server.crt
client_tls_key_file = /etc/pgbouncer/certs/server.key
server_tls_sslmode = require
server_tls_ca_file = /etc/pgbouncer/certs/ca.crt

pool_mode = transaction

max_client_conn = 200
default_pool_size = 20

ignore_startup_parameters = extra_float_digits

admin_users = postgres
stats_users = postgres
